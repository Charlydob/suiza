/* === Opal Dark Theme – base global === */
:root{
  --bg:#0e0f12;
  --bg2:#12141a;
  --card:rgba(20,22,28,0.72);
  --card-strong:rgba(20,22,28,0.9);
  --stroke:rgba(255,255,255,0.06);
  --text:#e7e9ee;
  --muted:#a9afbe;
  --primary:#7aa2ff;
  --primary-600:#5c86ff;
  --primary-700:#3c6bff;
  --accent:#00f0ff;
  --danger:#ff5151;
  --glass-blur:8px;
  --radius:14px;
  --shadow:0 10px 30px rgba(0,0,0,.45);
  --glow:0 0 0px rgba(122,162,255,0), 0 0 24px rgba(122,162,255,.18);
}

/* Fondo oscuro con degradado sutil */
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: 'Inter', system-ui, sans-serif;
  background:
    radial-gradient(1200px 800px at 20% -10%, #1a1e28 0%, transparent 60%),
    radial-gradient(900px 700px at 120% 20%, #10131a 0%, transparent 55%),
    var(--bg);
  color: var(--text);
}

/* ====== MAPA ====== */
#pagina-mapa {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow: hidden;
}
#map {
  height: 100%;
  width: 100%;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1;
}

/* Panel flotante (glass) */
#controls {
  position: fixed;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--card);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  padding: 12px 16px;
  border-radius: var(--radius);
  box-shadow: var(--shadow), var(--glow);
  border: 1px solid var(--stroke);
  z-index: 1000;
  width: calc(100% - 40px);
  max-width: 400px;
  text-align: center;
}

#controls h2 {
  margin: 0 0 10px;
  font-size: 16px;
  color: var(--primary);
  font-weight: 600;
}

#controls button {
  display: inline-block;
  margin: 6px 4px;
  padding: 10px 14px;
  font-size: 14px;
  border: 1px solid var(--stroke);
  background: linear-gradient(180deg, var(--primary-600), var(--primary-700));
  color: white;
  border-radius: 12px;
  cursor: pointer;
  transition: transform .05s ease, filter .2s ease, box-shadow .2s ease;
  box-shadow: var(--glow);
}
#controls button:active { transform: translateY(1px) scale(.99); }
#controls button:hover { filter: brightness(1.05); }

#status, #idiomaBusqueda {
  margin-top: 10px;
  font-size: 13px;
  color: var(--muted);
}

@media (max-width: 480px) {
  #controls { padding: 10px; width: calc(100% - 20px); }
  #controls h2 { font-size: 14px; }
  #controls button { width: 100%; margin: 6px 0; }
  .filter-card { padding: 8px; }
  .filter-card span { font-size: 12px; }
  .filter-card img { width: 32px; height: 32px; }
}

.leaflet-popup-content-wrapper {
  background: rgba(20,22,28,0.85);
  color: var(--text);
  backdrop-filter: blur(var(--glass-blur));
  border-radius: 12px;
  box-shadow: var(--shadow);
  border: 1px solid var(--stroke);
}
.leaflet-popup-tip { background: rgba(20,22,28,0.85); }
.leaflet-popup-content { color: var(--text); font-size: 14px; line-height: 1.4; }

/* ====== SIDEBAR ====== */
#sidebar {
  position: fixed;
  top: 0;
  left: 0;
  height: calc(100vh - 57px);
  width: 280px;
  background: var(--card);
  backdrop-filter: blur(9px);
  -webkit-backdrop-filter: blur(9px);
  border-right: 1px solid var(--stroke);
  padding: 20px;
  box-shadow: var(--shadow);
  transform: translateX(-100%);
  transition: transform .3s ease;
  z-index: 1001;
  display: flex;
  flex-direction: column;
  gap: 20px;
  overflow-y: auto;
  overscroll-behavior: contain;
  color: var(--text);
}
#sidebar.open { transform: translateX(0); }

#sidebarContenido { margin-top: 0; margin-bottom: 200px; padding: 0; }
main { margin-bottom: 80px; }

#closeSidebar,
#toggleMenu {
  width: 36px;
  height: 36px;
  background: linear-gradient(180deg, var(--primary-600), var(--primary-700));
  color: white;
  font-size: 22px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  z-index: 1003;
  box-shadow: var(--glow);
  border: 1px solid var(--stroke);
}
#closeSidebar { position: absolute; top: 320px; right: 10px; }
#toggleMenu {
  position: fixed;
  top: 50%;
  left: 0;
  transform: translateY(-50%);
  border-radius: 0 10px 10px 0;
  z-index: 1002;
}

#sidebar h2 {
  margin: 10px 0;
  font-size: 18px;
  color: var(--primary);
  text-align: center;
}

#status { font-size: 13px; color: var(--muted); text-align: center; }

/* ====== BÚSQUEDA / FILTROS ====== */
#location-controls { display: flex; flex-direction: column; gap: 12px; }

.search-group { display: flex; gap: 6px; }
.search-group input {
  flex: 1;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  background: var(--card-strong);
  color: var(--text);
}
.search-group input::placeholder{ color: #7d8394; }
.search-group button {
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  background: #1a1e28;
  color: var(--text);
  cursor: pointer;
}

.slider-label { font-size: 14px; margin: 0; color: var(--muted); }

/* GRID de filtros */
.filter-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
.filter-card {
  display: flex; flex-direction: column; align-items: center;
  padding: 10px;
  border-radius: 16px;
  background: rgba(26,30,40,0.7);
  box-shadow: 0 2px 10px rgba(0,0,0,.35);
  border: 1px solid var(--stroke);
  cursor: pointer; transition: transform .15s ease, box-shadow .2s ease, background .2s;
  text-align: center; color: var(--text);
}
.filter-card img { width: 40px; height: 40px; margin-bottom: 6px; filter: drop-shadow(0 2px 6px rgba(0,0,0,.4)); }
.filter-card span { font-size: 10px; font-weight: 600; color: var(--muted); }
.filter-card:hover { transform: scale(1.03); box-shadow: var(--shadow); }
.filter-card.activo { background: linear-gradient(180deg, rgba(32,37,50,.9), rgba(26,30,40,.7)); box-shadow: 0 0 0 1px rgba(122,162,255,.35) inset, var(--glow); }
.filter-card.inactivo { opacity: .65; }

#radiusSlider { width: 100%; margin: 0 0 10px 0; }

/* Botones genéricos */
.action-button, .clear-button {
  background: linear-gradient(180deg, var(--primary-600), var(--primary-700));
  color: white;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  cursor: pointer;
  font-size: 14px;
  box-shadow: var(--glow);
}
.clear-button {
  margin-top: 10px;
  margin-left: 95px;
  background: linear-gradient(180deg, #ff8a8a, #ff6a6a);
  color: #1a1a1a;
}

/* RADIO DE BÚSQUEDA */
.search-radius {
  stroke: var(--primary);
  stroke-opacity: 0.9;
  stroke-width: 2;
  fill: rgba(122,162,255,0.2);
}

/* ====== Favoritos en sidebar ====== */
#template-favorito-sidebar h3 {
  font-size: 16px;
  margin-bottom: 10px;
  color: var(--primary);
  text-align: center;
}

.favorito-sidebar-tarjeta {
  background: rgba(20,22,28,0.8);
  color: var(--text);
  backdrop-filter: blur(var(--glass-blur));
  border-radius: 12px;
  padding: 10px;
  margin-bottom: 10px;
  transition: background .2s ease, transform .2s ease;
  box-shadow: 0 2px 10px rgba(0,0,0,.35);
  border: 1px solid var(--stroke);
}
.favorito-sidebar-tarjeta:hover { transform: scale(1.02); }

#editorFavorito {
  background: var(--card);
  color: var(--text);
  backdrop-filter: blur(var(--glass-blur));
  border-radius: 12px;
  box-shadow: var(--shadow);
  border: 1px solid var(--stroke);
  width: 255px;
}
#editorFavorito h3 { font-size: 16px; margin-bottom: 12px; text-align: center; color: var(--primary); }
#editorFavorito label { font-size: 13px; color: var(--muted); margin-bottom: 4px; display: block; }

#editorFavorito input,
#editorFavorito textarea {
  width: 95%;
  padding: 8px;
  margin: 0 0 8px 0;
  border-radius: 10px;
  border: 1px solid var(--stroke);
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  background: var(--card-strong);
  color: var(--text);
}

#editorFavorito button {
  display: inline-block;
  margin: 5px 4px;
  padding: 10px 14px;
  border: 1px solid var(--stroke);
  border-radius: 12px;
  font-size: 14px;
  cursor: pointer;
  transition: filter .2s ease, transform .05s ease;
}
#editorFavorito button:first-of-type { background: linear-gradient(180deg, var(--primary-600), var(--primary-700)); color: white; box-shadow: var(--glow); }
#editorFavorito button:last-of-type  { background: #1a1e28; color: var(--text); }
#editorFavorito button:active{ transform: translateY(1px); }

/* Icono favorito */
.icono-favorito { font-size: 22px; color: #ffd166; text-shadow: 0 0 6px rgba(255,209,102,.3); }

/* Google Maps Popup personalizado */
b { font-size: 18px; color: var(--primary); text-shadow: rgba(0,0,0,.6) 1px 1px 2px; margin-left: 0; width: 80%; }
br { color: #fff; text-shadow: rgba(0,0,0,.6) 1px 1px 2px; }
#map { position: relative; }

.gm-style-iw-d{
  padding-right: 0 !important;
  padding-bottom: 0 !important;
  background-color: transparent !important;
  backdrop-filter: blur(var(--glass-blur)) !important;
  justify-content: center; text-align: center;
}
.gm-style-iw { padding: 0 !important; background-color: rgba(20,22,28,0.75) !important; backdrop-filter: blur(var(--glass-blur)) !important; color: var(--text); border-radius: var(--radius); }
.gm-style-iw-chr { padding: 0 !important; background-color: transparent !important; height: 1px !important; }
.gm-ui-hover-effect button span,
.gm-ui-hover-effect span{ padding: 0 !important; height: 1px !important; }

.popup-personalizado {
  width: 90%; height: 90%;
  background-color: transparent; color: #fff;
  backdrop-filter: blur(var(--glass-blur));
  border-radius: 10px; padding: 10px;
  box-shadow: none; border: none; font-size: 15px;
  text-shadow: #333 1px 1px 2px;
}
.boton-medio small{ color:#fff; font-weight: 600; }

.popup-personalizado button {
  padding: 8px;
  font-size: 13px;
  background: rgba(255,255,255,0.06);
  color: var(--text);
  border: 1px solid var(--stroke);
  border-radius: 12px;
  cursor: pointer;
  text-align: center;
  width: 100%;
  transition: filter .2s ease, transform .05s ease;
}
.popup-personalizado button:hover { filter: brightness(1.06); }
.popup-personalizado button:active { transform: translateY(1px); }

.popup-personalizado .grupo-botones-abajo,
.popup-personalizado .grupo-botones-arriba {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
  margin-top: 5px;
}
.popup-personalizado .boton-medio { margin: 10px 0; font-size: 13px; color: var(--text); }

/* Filtros favoritos */
#filtrosFavoritos {
  display: flex; flex-direction: column; gap: 8px; margin: 10px 0 15px 0;
}
#filtrosFavoritos input,
#filtrosFavoritos select {
  padding: 10px;
  font-size: 14px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  background-color: rgba(20,22,28,.9);
  backdrop-filter: blur(3px);
  color: var(--text);
  box-shadow: 0 2px 6px rgba(0,0,0,.3);
}
#filtrosFavoritos input:focus,
#filtrosFavoritos select:focus { outline: none; border-color: rgba(122,162,255,.45); box-shadow: var(--glow); }

#contenedorFavoritos { display: grid; gap: 12px; }
#buscadorFavoritos { display: flex; align-items: center; width: 10%; justify-content: center; }
